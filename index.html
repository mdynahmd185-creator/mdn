
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LedgerPro">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://i.ibb.co/Ld89H48f/ledgerpro-logo.png">
    
    <title>LedgerPro - ليدجر برو</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap" rel="stylesheet">
    <style>
        :root {
            --safe-area-inset-top: env(safe-area-inset-top);
            --safe-area-inset-bottom: env(safe-area-inset-bottom);
        }
        /* منع اللون الأبيض في وضع النهار (الوضع الافتراضي) */
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #1e293b; /* Slate 800 بدلاً من الأبيض */
            color: #f1f5f9; /* Slate 100 */
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            overflow-x: hidden;
            overscroll-behavior-y: contain;
        }
        .dark body {
            background-color: #0f172a; /* Slate 900 */
        }
        
        .page-transition {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes character-walk {
            0% { transform: translateX(-80px); }
            60% { transform: translateX(180px); }
            100% { transform: translateX(180px); }
        }
        .animate-character-walk {
            animation: character-walk 8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes ok-bubble {
            0%, 65% { opacity: 0; transform: scale(0); }
            72% { opacity: 1; transform: scale(1.1); }
            80%, 100% { opacity: 1; transform: scale(1); }
        }
        .animate-ok-bubble {
            animation: ok-bubble 8s ease-out infinite;
            transform-origin: bottom right;
        }

        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
          20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        .animate-shake {
          animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        /* أنيميشن الجرس الجديد */
        @keyframes bell-ring {
          0%, 100% { transform: rotate(0); }
          5%, 15%, 25% { transform: rotate(15deg); }
          10%, 20%, 30% { transform: rotate(-15deg); }
          35% { transform: rotate(0); }
        }
        .animate-bell-ring {
          animation: bell-ring 3s ease-in-out infinite;
          transform-origin: top center;
          display: inline-block;
        }

        /* أنيميشن التمدد الطولي (Stretch) للسهم */
        @keyframes stretch-y {
          0%, 100% { transform: scaleY(1); }
          50% { transform: scaleY(1.25); }
        }
        .animate-stretch-y {
          animation: stretch-y 2s ease-in-out infinite;
          transform-origin: center;
        }

        /* أنيميشن اليد المخصص: تلوح (1)، ترتفع (2)، تلوح (3) */
        @keyframes wave-stand-wave {
          0%, 100% { transform: rotate(0deg) translateY(0) scale(1); }
          10% { transform: rotate(20deg) translateY(0) scale(1); }
          20% { transform: rotate(-15deg) translateY(0) scale(1); }
          30% { transform: rotate(0deg) translateY(-15px) scale(1.3); }
          40% { transform: rotate(20deg) translateY(-15px) scale(1.3); }
          50% { transform: rotate(-15deg) translateY(-15px) scale(1.3); }
          65% { transform: rotate(0deg) translateY(0) scale(1); }
        }
        .animate-hand-hero {
          animation: wave-stand-wave 4s ease-in-out infinite;
          transform-origin: bottom center;
          display: inline-block;
        }

        /* أنيميشن المحفظة: تضغط ثم تفتح (تتمدد) */
        @keyframes wallet-bounce {
          0%, 100% { transform: scale(1); }
          20% { transform: scale(1.1, 0.85); }
          40% { transform: scale(0.95, 1.05); }
          60% { transform: scale(1); }
        }
        .animate-wallet-pop {
          animation: wallet-bounce 2s ease-in-out infinite;
        }

        /* أنيميشن خروج النقود من المحفظة */
        @keyframes money-fly {
          0% { opacity: 0; transform: translateY(5px) scale(0); }
          30% { opacity: 1; transform: translateY(-12px) scale(1.1); }
          60% { opacity: 0; transform: translateY(-22px) scale(0.5); }
          100% { opacity: 0; transform: translateY(-22px) scale(0); }
        }
        .animate-money-dispense {
          animation: money-fly 2s ease-in-out infinite;
        }

        /* أنيميشن تمدد صندوق المخزون وخروج الأجهزة */
        @keyframes box-bounce {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.15); }
        }
        .animate-box-bounce {
          animation: box-bounce 3s ease-in-out infinite;
        }

        @keyframes pop-phone {
          0%, 10%, 90%, 100% { opacity: 0; transform: translate(0, 0) scale(0); }
          30%, 70% { opacity: 1; transform: translate(-10px, -6px) scale(0.7); }
        }
        @keyframes pop-monitor {
          0%, 15%, 85%, 100% { opacity: 0; transform: translate(0, 0) scale(0); }
          40%, 75% { opacity: 1; transform: translate(10px, -6px) scale(0.7); }
        }
        @keyframes pop-watch {
          0%, 20%, 80%, 100% { opacity: 0; transform: translate(0, 0) scale(0); }
          50%, 70% { opacity: 1; transform: translate(0px, 10px) scale(0.7); }
        }
        .animate-pop-phone { animation: pop-phone 3s ease-in-out infinite; }
        .animate-pop-monitor { animation: pop-monitor 3s ease-in-out infinite; }
        .animate-pop-watch { animation: pop-watch 3s ease-in-out infinite; }

        /* أنيميشن شريط المهام السفلي الجديد */
        @keyframes nav-pop {
          0% { transform: scale(1) translateY(0); }
          40% { transform: scale(1.2) translateY(-4px); }
          70% { transform: scale(0.95) translateY(1px); }
          100% { transform: scale(1.1) translateY(0); }
        }
        .animate-nav-pop {
          animation: nav-pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .pt-safe { padding-top: var(--safe-area-inset-top); }
        .pb-safe { padding-bottom: var(--safe-area-inset-bottom); }
        .mb-safe { margin-bottom: var(--safe-area-inset-bottom); }

        @media print {
            @page {
                size: A4;
                margin: 10mm;
            }
            body {
                background-color: #f1f5f9 !important;
                color: #1e1b4b !important;
            }
            .no-print, aside, header, nav, button, .print\:hidden {
                display: none !important;
            }
            main {
                margin: 0 !important;
                padding: 0 !important;
                overflow: visible !important;
            }
            .print-only {
                display: block !important;
            }
            .printable-content {
                width: 100% !important;
                position: absolute;
                top: 0;
                right: 0;
                margin: 0 !important;
                padding: 0 !important;
                box-shadow: none !important;
                border: none !important;
                background-color: #f1f5f9 !important;
                color: #1e1b4b !important;
            }
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#0ea5e9',
                        secondary: '#f59e0b',
                        accent: '#6366f1'
                    }
                }
            }
        }
    </script>
<script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "recharts": "https://esm.sh/recharts@^3.6.0"
  }
}
</script>
</head>
<body class="transition-colors duration-300 antialiased">
    <div id="root"></div>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').catch(err => console.log('SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
